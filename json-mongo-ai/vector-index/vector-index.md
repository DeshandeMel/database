---
output: 
  pdf_document: default
  html_document: default
---

# Create & Query Vector Index with Oracle Database API for MongoDB

## Introduction

In this lab, you test your system by performing similarity search on your sample data. You will create a vector index and query your vector index.

Your vector index will be your operator, organizing the vector embeddings of each book such that look ups are quick to retreiveâ€”topic specific books that will interest your readers. 


Estimated Time: 15 Minutes

### Objectives

In this lab you will:

* Create a Vector Index on Oracle 23ai Database API for MongoDB

* Query the Vector Index using MongoDB API

### Prerequisites

* Have an Oracle Autonomous Database provisioned with Lifecycle Status - Available

* Connected to your Autonomous Database through MongoDB Shell

## Task 1: Create a Vector Index on Oracle 23ai Database API for MongoDB

    ```
    <copy>
    db.books.createSearchIndex("vector-search", "vectorSearch", { fields: [ { type: "vector", numDimensions: 768, path: "plot_embedding", similarity: "cosine"} ] } )
    </copy>
    ```

## Task 2: Query the Vector Index using MongoDB API

    ```
    <copy>
    db.books.aggregate( {"vectorSearchIndex": { "index": "vector-search", "path": "plot_embedding", "queryVector": [-0.0018296464113518596, 0.03140312433242798, -0.01104124914854765, -0.020659370347857475, -0.028998514637351036, 0.057149488478899, -0.0658574104309082, 0.006521392613649368, -0.04621532931923866, 0.009266591630876064, -0.016050910577178, 0.03954636678099632, 0.039445456117391586, 0.005293678492307663, -0.01455106120556593, 0.03703779727220535, 0.04694514349102974, -0.007341109681874514, 0.00246308627538383, 0.016267184168100357, -0.026904692873358727, 0.011013991199433804, -0.02814628928899765, -0.005106524098664522, 0.016407834365963936, 0.008104028180241585, -0.03275202214717865, 0.02680978551506996, -0.04848765209317207, 0.021116795018315315, 0.019100455567240715, 0.0018168448004871607, 0.036148443818092346, 0.039010725915431976, -0.07792676985263824, -0.06589911878108978, 0.07229037582874298, -0.03425147384405136, -0.0318298302590847, 0.014888988807797432, 0.0641062930226326, 0.001739033847115934, 0.015956135466694832, 0.0084758335724473, 0.017377911135554314, -0.02985462360084057, -0.004820345435291529, 0.006256422493606806, 0.012495486997067928, -0.010646525770425797, 0.00785350427031517, 0.003953094128519297, 0.02638748288154602, -0.040629636496305466, -0.025056950747966766, 0.06299927085638046, 0.03669777885079384, -0.019096065312623978, -0.015377718023955822, -0.0006074887933209538, 0.0667172223329544, 0.03679466247558594, 0.07124365121126175, 0.036528609693050385, 0.014736917801201344, -0.07041294872760773, -0.01190679520368576, 0.001616370864212513, 0.02487412840127945, -0.06689522415399551, 0.06176116690039635, -0.004924641456454992, 0.04588930308818817, 0.019512725993990898, -0.001936057349666953, -0.0014134979574009776, 0.016280721873044968, -0.023553086444735527, 0.0536954328417778, 0.006547466851770878, 0.03909984230995178, -0.026402732357382774, -0.020534159615635872, -0.02528027817606926, 0.037700407207012177, 0.017374545335769653, 0.015473296865820885, -0.05276494100689888, -0.08037703484296799, -0.028309714049100876, 0.06838750094175339, -0.024988161399960518, 0.0378410704433918, -0.008327485993504524, 0.023404179140925407, -0.020218143239617348, -0.0001670055353315547, -0.020544156432151794, -0.05112766474485397, -0.07372066378593445, -0.022395553067326546, 0.0387851819396019, 0.011090575717389584, 0.022730201482772827, 0.05455513298511505, 0.06494669616222382, -0.02378849871456623, 0.0019300761632621288, -0.022847991436719894, 0.02945360168814659, -0.028249192982912064, -0.005249110981822014, -0.07498978823423386, -0.06745820492506027, -0.0469214990735054, -0.030224984511733055, 0.08035910874605179, -0.06669063866138458, 0.013313363306224346, 0.016256464645266533, -0.025959892198443413, -0.0016600338276475668, -0.018976913765072823, 0.05170218273997307, 0.03897698596119881, 0.017668342217803, -0.03985528275370598, -0.030541567131876945, -0.004095418844372034, -0.03488948941230774, -0.027864515781402588, -0.005647181533277035, -0.03064052015542984, -0.018284570425748825, -0.013060483150184155, 0.026418892666697502, 0.06023166701197624, 0.012102875858545303, -0.019112471491098404, -0.02914384752511978, 0.06377578526735306, 0.0009236153564415872, 0.027487318962812424, -0.04535748064517975, -0.010778682306408882, -0.024917500093579292, 0.010413180105388165, 0.028569018468260765, -0.022187668830156326, 0.018630968406796455, 0.002804767806082964, 0.002347396221011877, 0.03695664554834366, -0.01166104432195425, -0.07167871296405792, -0.005927023012191057, -0.005108359735459089, 0.024672837927937508, 0.022557690739631653, -0.03831155598163605, -0.00010330711666028947, -0.056429699063301086, 0.008970687165856361, 0.05180900916457176, -0.03305062651634216, 0.020837770774960518, 0.0984296202659607, 0.01352702733129263, -0.015163716860115528, 0.09180021286010742, -0.018284117802977562, -0.035620834678411484, -0.04147741571068764, -5.574261012952775e-05, 0.07421412318944931, -0.026652587577700615, -0.017115332186222076, -0.06780087947845459, 0.06411164999008179, 0.0017759609036147594, 0.04270178824663162, -0.06987959146499634, 0.03138308972120285, 0.0538807138800621, 0.00420076260343194, 0.013275306671857834, -0.0234170313924551, -0.007415957748889923, -0.0568978488445282, -0.03767155855894089, -0.042795103043317795, -0.019746780395507812, -0.040463369339704514, -0.004755088128149509, 0.0275343619287014, 0.043581292033195496, 0.027585294097661972, 0.012515072710812092, -0.02745368331670761, 0.0029071085155010223, -0.01149575412273407, -0.007982591167092323, -0.019756143912672997, 0.01519712619483471, -0.03712734952569008, 0.053189050406217575, 0.033462610095739365, 0.000571426993701607, 0.03913058713078499, -0.009393026120960712, 0.09108144044876099, -0.04175912216305733, 0.008321719244122505, 0.024070747196674347, -0.026898430660367012, -0.016243066638708115, -0.017336048185825348, -0.019412612542510033, -0.057668350636959076, 0.06144709885120392, -0.01845119707286358, 0.0030430881306529045, 0.01887841895222664, 0.03882984817028046, 0.01795833185315132, 0.053634945303201675, 0.009912936948239803, 0.004994535818696022, -0.07501323521137238, -0.04821570962667465, 0.029934650287032127, -0.02328173629939556, 0.0980367660522461, 0.013320520520210266, -0.002599533414468169, 0.026698043569922447, 0.022218922153115273, 0.03016636148095131, -0.028998902067542076, 0.013643595390021801, -0.025965381413698196, 0.017119796946644783, -0.007755263242870569, 0.0012534622801467776, -0.015997683629393578, 0.07120015472173691, -0.03767497092485428, 0.018842050805687904, -0.02233140729367733, 0.0011827738489955664, 0.04614630714058876, -0.009787820279598236, 0.05608320236206055, 0.0326644703745842, 0.02581426128745079, -0.026851454749703407, -0.05720654875040054, -0.008291879668831825, 0.010185202583670616, -0.028916290029883385, 0.06445007026195526, -0.05982597544789314, 0.008611646480858326, -0.0506017692387104, -0.00922689400613308, 0.03717970475554466, -0.031700242310762405, 0.03291159123182297, 0.019617581740021706, -0.02127617411315441, 0.007675256580114365, 0.01840747706592083, 0.013951234519481659, -0.029349936172366142, -0.007670893799513578, -0.010779354721307755, 0.03022921085357666, 0.012166623957455158, -0.009580225683748722, -0.02812785841524601, -0.0528336726129055, -0.049765195697546005, -0.02806447446346283, -0.023018740117549896, -0.02343255653977394, 0.07961759716272354, -0.010203871876001358, -0.001116229803301394, -0.009289593435823917, 0.04059305042028427, 0.019132139161229134, -0.0014751300914213061, 0.01441140379756689, 0.04799163341522217, 0.06714028120040894, 0.060761187225580215, 0.04840679466724396, 0.0438208244740963, 0.031608663499355316, -0.030909955501556396, 0.025259865447878838, 0.012675357982516289, -0.024148153141140938, 0.012423664331436157, -0.04097183421254158, 0.014176147058606148, -0.00388404936529696, 0.016508707776665688, 0.07771328091621399, 0.012066641822457314, -0.008698773570358753, 0.036861225962638855, 0.011440332047641277, 0.007068514358252287, -0.022360466420650482, 0.055458977818489075, 0.002043088898062706, 0.00479870056733489, 0.027156298980116844, 0.041931282728910446, -0.03607930243015289, -0.014142061583697796, 0.04842380806803703, -0.06398791819810867, 0.04560914263129234, 0.015249490737915039, -8.57404520502314e-05, 0.029439598321914673, -0.06939718872308731, -0.023959055542945862, -0.03626465052366257, 0.006567677948623896, -0.06544528156518936, 0.0025337785482406616, -0.03882975876331329, 0.061660487204790115, -0.005927480757236481, 0.03270430490374565, -0.0060378448106348515, -0.011977523565292358, 0.05150524154305458, -0.040609244257211685, -0.010904171504080296, -0.09547525644302368, 0.0391572080552578, 0.00272571318782866, -0.06004208326339722, 0.022226059809327126, 0.039808280766010284, -0.024965137243270874, -0.0666959285736084, -0.0043526217341423035, -0.01622789166867733, -0.0163705013692379, -0.018419833853840828, 0.016659444198012352, 0.04219324141740799, -0.058777134865522385, -0.01718699187040329, -0.009296844713389874, -0.00915346946567297, 0.027369538322091103, -0.000997900846414268, -0.07610099762678146, 0.049281105399131775, 0.07301990687847137, 0.03184416890144348, 0.06621882319450378, -0.006911099888384342, 0.021702731028199196, 0.0027961612213402987, -0.04331747069954872, 0.0319022573530674, 0.04437505453824997, 0.05293462797999382, -0.00018794237985275686, -0.030358362942934036, -0.027943987399339676, -0.03905574232339859, 0.026775740087032318, 0.013367901556193829, 0.006605579983443022, 0.040474578738212585, 0.014744649641215801, 0.004978793207556009, -0.028548981994390488, 0.030363623052835464, 0.0036246199160814285, 0.02687767893075943, -0.08765232563018799, -0.005994081497192383, 0.010467824526131153, -0.07247909158468246, 0.0209710281342268, -0.005210878327488899, -0.026685241609811783, -0.0007005140068940818, 0.00671409210190177, -0.05352045223116875, 0.0017232083482667804, -0.008688891306519508, -0.051857057958841324, -0.014724846929311752, -0.002028592862188816, -0.009740522131323814, -0.019661134108901024, -0.014407407492399216, -0.07510868459939957, 0.07386498153209686, -0.0029941441025584936, 0.05383787676692009, 0.024155549705028534, -0.020678913220763206, -0.03178233280777931, -0.0519130602478981, -0.040710508823394775, -0.006439018528908491, 0.021379487589001656, 0.02654048055410385, 0.012874855659902096, 0.011042097583413124, 0.1131742000579834, -0.009716815315186977, 0.01831834949553013, -0.04156070947647095, -0.06024589389562607, 0.004550070036202669, 0.00030782996327616274, -0.020526066422462463, -0.05073949322104454, -0.0075620743446052074, 0.025997525081038475, 0.005469442345201969, 0.008224628865718842, -0.028415288776159286, 0.03008098341524601, -0.02043670229613781, -0.010416986420750618, -0.010037521831691265, 0.06439383327960968, -0.02966911345720291, -0.034228209406137466, -0.027239909395575523, -0.003610052866861224, 0.007426419295370579, 0.051344603300094604, 0.04781828448176384, -0.014901872724294662, -0.05279884859919548, 0.01247570663690567, 0.01174170058220625, 0.009622282348573208, -0.05941437929868698, -0.0054526301100850105, 0.03805946558713913, -0.03274942934513092, -0.017533017322421074, -0.009729978628456593, -0.011185244657099247, 0.052676379680633545, 0.01811319589614868, -0.010260814800858498, -0.04618490859866142, -0.03234687075018883, -0.0017113065114244819, -0.04996771737933159, 0.016313472762703896, -0.04104774817824364, 0.022573109716176987, 0.03702274337410927, 0.00663032429292798, 0.0180559903383255, 0.0432959645986557, -0.011086147278547287, 0.00822509080171585, -0.009654668159782887, 0.016807712614536285, -0.025524010881781578, -0.0028263512067496777, 0.020326215773820877, 0.017980150878429413, 0.09060625731945038, -0.02819526195526123, -0.017947187647223473, 0.0228942409157753, 0.0001831977569963783, -0.00428113853558898, 0.033696070313453674, -0.023547856137156487, -0.010937049053609371, 0.0448017455637455, 0.008282816968858242, 0.034174591302871704, 0.015438193455338478, -0.030801283195614815, -0.03211049363017082, 0.013342993333935738, 0.023770127445459366, 0.0653432235121727, 0.01485041156411171, -0.004471618682146072, 0.04465167969465256, 0.012925103306770325, 0.0438082255423069, 0.020267976447939873, 0.006554255727678537, -0.0237065888941288, -0.05867540091276169, -0.001942483359016478, -0.0030843722634017467, -0.027038762345910072, 0.0462820865213871, 0.0047675748355686665, 0.026055343449115753, 0.05795470252633095, 0.004574277903884649, -0.020617110654711723, 0.009144320152699947, -0.029484357684850693, 0.058313049376010895, -0.05115903913974762, 0.01181718334555626, -0.016669077798724174, 0.019731495529413223, -0.0035275225527584553, 0.02031736634671688, -0.01884320005774498, -0.05523492395877838, 0.0516352653503418, 0.03450772538781166, -0.005197357386350632, -0.01812146231532097, 0.011956470087170601, -0.05125036463141441, 0.030565908178687096, -0.07161310315132141, -0.014410631731152534, 0.0759064108133316, -0.011274155229330063, 0.03031325899064541, 0.001458250335417688, -0.04047531634569168, -0.04259018227458, 0.024441512301564217, 0.04695848003029823, -0.04632904380559921, -0.022006185725331306, 0.02243681065738201, -0.03805398941040039, -0.032104864716529846, 0.04258492961525917, -0.04296312853693962, -0.01880509965121746, -0.013553954660892487, 0.027541670948266983, -0.09623302519321442, 0.000536103849299252, -0.04516648128628731, -0.025614038109779358, -0.023964500054717064, 0.031508542597293854, 0.0241253562271595, -0.014257856644690037, -0.0019661567639559507, 0.035492632538080215, -0.07206737250089645, -0.023951608687639236, 0.012996687553822994, 0.0425286665558815, -0.06849146634340286, -0.04024181514978409, -0.0567411407828331, -0.054880302399396896, 0.003902922384440899, 0.019206130877137184, -0.04994894564151764, 0.0015920301666483283, 0.026755845174193382, -0.01796126179397106, 0.009513352997601032, -0.018303969874978065, -0.05337363854050636, 0.017552653327584267, -0.007934631779789925, 0.04497045278549194, -0.018267907202243805, -0.04788494482636452, -0.05009446293115616, 0.040808483958244324, -0.031224433332681656, -0.022513991221785545, -0.05479229614138603, 0.01429750956594944, 0.02414717525243759, -0.0013833065750077367, 0.022047895938158035, 0.0007408559322357178, 0.006773764733225107, -0.00879012793302536, 0.03573212772607803, -0.028501736000180244, 0.04270854964852333, 0.07181157171726227, -0.033484622836112976, 0.01952979899942875, 0.026872264221310616, -0.011360537260770798, -0.008433384820818901, 0.03987615928053856, -0.03681366145610809, 0.028467588126659393, 0.030070248991250992, 0.0014849590370431542, -0.014534523710608482, 0.005460207816213369, 0.007842445746064186, 0.07763893902301788, -0.025316916406154633, -0.08304788917303085, -0.021307488903403282, 0.027047496289014816, -0.024045253172516823, 0.009792283177375793, -0.014553884975612164, 0.021339289844036102, -0.02491229586303234, -0.09977233409881592, -0.04189160838723183, 0.016073090955615044, 0.0727553442120552, -0.0162819791585207, 0.004458636045455933, -0.0025734808295965195, -0.06442458927631378, -0.00550633342936635, -0.016460802406072617, -0.05130947753787041, 0.02727055549621582, 0.04680125415325165, 0.0701126754283905, 0.014616411179304123, -0.025756023824214935, -0.0202504750341177, 0.05608903616666794, 0.05848630145192146, 0.01921042427420616, -0.0034265615977346897, -0.01276155561208725, -0.0019878633320331573, -0.00923999398946762, 0.04009297862648964, 0.08706751465797424, 0.03360483795404434, 0.04266402870416641, -0.024144206196069717, 0.007552463095635176, 0.01226760633289814, -0.016711579635739326, -0.04205503314733505, -0.031534358859062195, -0.05138951539993286, 0.013837683014571667, -0.010347859002649784, -0.06270097196102142, 0.07108190655708313, -0.009850648231804371, 0.03394715487957001, -0.06214626133441925, -0.06755999475717545, -0.010287406854331493, -0.04552413150668144, 0.020537354052066803, -0.02237749844789505, -0.009475461207330227, 0.024905968457460403, -0.0032494852785021067, -0.011149204336106777, -0.012433110736310482, -0.023378925397992134, -0.08285649865865707, -0.013026867993175983, 0.027215855196118355, 0.03706502914428711, -0.01950482465326786, 0.03653271123766899, -0.017439819872379303, 0.00967516377568245, -0.012318737804889679, -0.029725590720772743, -0.005349639803171158, -0.0312739759683609, -0.03567139059305191, 0.04623427242040634, -0.019057903438806534, -0.01631217449903488, 0.013538630679249763, -0.037881724536418915, -0.009278098121285439, 0.02310073934495449, 0.03835165873169899, -0.048300035297870636, 0.07665853947401047, 0.0008551077335141599, 0.03725729510188103, -0.015185652300715446, -0.015837203711271286, -0.024612469598650932, 0.03826666623353958, 0.04106873273849487, 0.02757333219051361, -0.0008150502690114081, 0.026520567014813423, 0.02913474291563034, 0.010302132926881313, 0.053345032036304474, 0.0008844765834510326, 0.008126671425998211, -0.041902679949998856, -0.04261181876063347, -0.010580062866210938, 0.013267341069877148, -0.03187675029039383, -0.03140241280198097, -0.0198737271130085, -0.028961464762687683, -0.07817120850086212, 0.030190199613571167, 0.011441027745604515, 0.0150555819272995, -0.058342982083559036, -0.0030511626973748207, -0.006366935092955828, -0.000959107419475913, 0.02755044586956501, -0.0852103903889656, -0.06911295652389526, 0.003220758866518736, 0.03677740320563316, 0.05014022812247276, -0.008946727961301804, -0.012003548443317413, -0.02653415873646736, 0.044149577617645264, 0.0800740122795105, 0.01032673567533493, -0.015417936258018017, -0.045163851231336594, 0.039389096200466156, 0.04517541453242302, -0.009560653939843178, -0.0580315887928009, -0.04922513663768768, -0.04836975038051605, 0.0049188705161213875, 0.04691649600863457, 0.02707546390593052, 0.04290677607059479, 0.06528022885322571, 5.249816967989318e-05, -0.032258156687021255, 0.033005230128765106, -0.05914788693189621, -0.04823879897594452, 0.03431268781423569, 0.044526442885398865, 0.05065412074327469, -0.016877908259630203, 0.0012270017759874463], "numCandidates": 150, "limit": 3}, {"$project": title: 1, author: 1, illustrator: 1, published: 1, fiction: 1} } )
    </copy>
    ```

## Learn More

* [Vector Search](Insert Link)
* [How to Create Query Vectors](Insert Link)

## Acknowledgements

* **Author** - Deshan de Mel
* **Contributors** -  Anoosha Pilli, Arabella Yao, Madhupriya Ravishankar, Hermann Baer, Beda Hammerschmidt
- **Last Updated By/Date** - Deshan de Mel, July 2025
